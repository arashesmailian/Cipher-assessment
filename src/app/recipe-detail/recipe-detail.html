<div class="min-h-screen bg-gradient-to-br from-orange-50 to-red-50">
  <!-- Navigation Bar -->
  <div class="bg-white shadow-sm">
    <div class="container mx-auto px-4 py-4">
      <a
        routerLink="/"
        class="inline-flex items-center text-orange-600 hover:text-orange-700 transition"
      >
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          ></path>
        </svg>
        Back to Recipes
      </a>
    </div>
  </div>

  <!-- Loading State -->
  @if (isLoading) {
  <div class="flex justify-center items-center py-20">
    <div class="spinner"></div>
    <span class="ml-3 text-gray-600">Loading recipe details...</span>
  </div>
  }

  <!-- Error State -->
  @if (error && !isLoading) {
  <div class="container mx-auto px-4 py-20 text-center">
    <svg
      class="w-24 h-24 mx-auto text-gray-300 mb-4"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
      ></path>
    </svg>
    <h2 class="text-2xl font-semibold text-gray-600 mb-2">Recipe not found</h2>
    <p class="text-gray-500 mb-6">The recipe you're looking for doesn't exist.</p>
    <a
      routerLink="/"
      class="inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition"
    >
      Browse Recipes
    </a>
  </div>
  }

  <!-- Recipe Content -->
  @if (meal && !isLoading) {
  <div class="container mx-auto px-4 py-8">
    <!-- Hero Section -->
    <div class="bg-white rounded-2xl shadow-xl overflow-hidden mb-8">
      <div class="lg:flex">
        <!-- Image -->
        <div class="lg:w-1/2">
          <img
            [src]="meal.strMealThumb || getPlaceholderImage()"
            [alt]="meal.strMeal"
            class="w-full h-full object-cover"
            style="min-height: 400px; max-height: 500px"
            (error)="$event.target.src = getPlaceholderImage()"
          />
        </div>

        <!-- Basic Info -->
        <div class="lg:w-1/2 p-8">
          <h1 class="text-3xl lg:text-4xl font-bold text-gray-800 mb-4">
            {{ meal.strMeal }}
          </h1>

          <div class="flex flex-wrap gap-3 mb-6">
            @if (meal.strArea) {
            <span
              class="inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"
            >
              <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" />
              </svg>
              {{ meal.strArea }} Cuisine
            </span>
            } @if (meal.strCategory) {
            <span
              class="inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"
            >
              <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                />
              </svg>
              {{ meal.strCategory }}
            </span>
            }
          </div>

          <!-- Ingredients Summary -->
          <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-3">Quick Overview</h3>
            <p class="text-gray-600">
              This {{ meal.strArea }} {{ meal.strCategory }} recipe features
              {{ ingredients.length }} ingredients.
            </p>
          </div>

          <!-- YouTube Link -->
          @if (meal.strYoutube) {
          <a
            [href]="meal.strYoutube"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition"
          >
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"
              />
            </svg>
            Watch Video Tutorial
          </a>
          }
        </div>
      </div>
    </div>

    <div class="grid lg:grid-cols-3 gap-8">
      <!-- Ingredients Section -->
      <div class="lg:col-span-1">
        <div class="bg-white rounded-xl shadow-lg p-6 sticky top-4">
          <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
            <svg
              class="w-6 h-6 mr-2 text-orange-600"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
              ></path>
            </svg>
            Ingredients
          </h2>

          <ul class="space-y-3">
            @for (ingredient of ingredients; track $index) {
            <li class="flex items-start">
              <svg
                class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              <span class="text-gray-700">
                <span class="font-medium">{{ ingredient.measure }}</span>
                {{ ingredient.name }}
              </span>
            </li>
            }
          </ul>
        </div>
      </div>

      <!-- Instructions Section -->
      <div class="lg:col-span-2">
        <div class="bg-white rounded-xl shadow-lg p-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
            <svg
              class="w-6 h-6 mr-2 text-orange-600"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
              ></path>
            </svg>
            Instructions
          </h2>

          @if (getInstructions().length > 1) {
          <ol class="space-y-4">
            @for (step of getInstructions(); track $index) {
            <li class="flex">
              <span
                class="flex-shrink-0 w-8 h-8 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center font-bold mr-4"
              >
                {{ $index + 1 }}
              </span>
              <p class="text-gray-700 leading-relaxed pt-1">{{ step }}</p>
            </li>
            }
          </ol>
          } @else {
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700 leading-relaxed whitespace-pre-line">
              {{ meal.strInstructions }}
            </p>
          </div>
          }
        </div>

        <!-- Additional Info -->
        @if (meal.strTags) {
        <div class="bg-white rounded-xl shadow-lg p-6 mt-6">
          <h3 class="text-lg font-semibold text-gray-800 mb-3">Tags</h3>
          <div class="flex flex-wrap gap-2">
            @for (tag of meal.strTags.split(','); track tag) {
            <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm">
              {{ tag.trim() }}
            </span>
            }
          </div>
        </div>
        } @if (meal.strSource) {
        <div class="bg-white rounded-xl shadow-lg p-6 mt-6">
          <h3 class="text-lg font-semibold text-gray-800 mb-3">Recipe Source</h3>
          <a
            [href]="meal.strSource"
            target="_blank"
            rel="noopener noreferrer"
            class="text-orange-600 hover:text-orange-700 underline"
          >
            View Original Recipe
          </a>
        </div>
        }
      </div>
    </div>
  </div>
  }
</div>
